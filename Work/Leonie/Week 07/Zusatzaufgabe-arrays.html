<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zusatzaufgabe Arrays</title>
    <link rel="stylesheet" href="../css datei/common.css">
    <script src="/Kurs/common.js"></script>
</head>

<body>
    <script>
        printH(1, "Zusatzaufgabe Arrays");
        printHr();
        printH(3, "Aufsteigend und absteigen Zahlen sortieren");

        let numbers1 = [5, 3, 8, 1, 2];
        numbers1.sort((a, b) => a - b);
        printLn("Aufsteigend sortierte Zahlen: " + numbers1);
        numbers1.sort((a, b) => b - a);
        printLn("Absteigend sortierte Zahlen: " + numbers1);

        printHr();
        printH(3, "Aufsteigend und absteigend texte nach länge sortieren");

        let texts = ["Zebra", "Apfel", "Banane", "Kiwi", "Erdbeere", "Ananas", "Mango", "Papaya", "Melone", "Traube"];
        texts.sort((a, b) => a.length - b.length);
        printLn("Aufsteigend sortierte Texte nach Länge: " + texts);
        texts.sort((a, b) => b.length - a.length);
        printLn("Absteigend sortierte Texte nach Länge: " + texts);

        printHr();
        printH(3, "texte nach alphabetisch sortieren");

        let texts2 = ["Zebra", "Apfel", "Banane", "Ägypt", "Kiwi", "Erdbeere", "Ananas", "Mango", "Papaya", "Melone", "Traube"];
        const comparAlphabetically = new Intl.Collator('de-DE', { sensitivity: 'base' }).compare;
        texts2.sort(comparAlphabetically);
        printLn("Alphabetisch sortierte Texte: " + texts2);

        printHr();
        printH(3, "bubble sort wie viele schritte macht es und wie kann man es verbessern");
        let numbers = [5, 0, 1, 2, 3, 4, 6, 7, 11, 8, 12, 9, 13, 10];
        printH(4, "Bubble Sort");
        function bubbleSort(arr) {
            const n = arr.length;
            let steps = 0; // Zähler für Schritte
            for (let i = 0; i < n - 1; i++) { // Äußere Schleife: Anzahl der Durchläufe
                steps++;
                console.log(`Step ${steps}: Comparing ${arr[i]} and ${arr[i + 1]}`);
                for (let j = 0; j < n - i - 1; j++) { // Innere Schleife: Vergleiche benachbarte Elemente
                    if (arr[j] > arr[j + 1]) { // Wenn das linke Element größer ist, tausche
                        [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]]; // Swap
                    }
                }
            }
            return { sortedArray: arr, steps: steps }; // Rückgabe des sortierten Arrays
        }
        let { sortedArray: sortedArrayV0, steps: stepsV0 } = bubbleSort(numbers);
        printLn("Sorted array V0: " + sortedArrayV0);
        printLn("Number of steps V0: " + stepsV0);
        printHr();

        printH(4, "Bubble Sort mit Optimierung");
        function bubbleSortOptimized(arr) {
            let n = arr.length;
            let steps = 0;
            let swapped;
            do {
                swapped = false;
                for (let i = 0; i < n - 1; i++) {
                    steps++;
                    console.log(`Step ${steps}: Comparing ${arr[i]} and ${arr[i + 1]}`);
                    if (arr[i] > arr[i + 1]) {
                        [arr[i], arr[i + 1]] = [arr[i + 1], arr[i]]; // Swap
                        swapped = true;
                    }
                }
                n--; // Reduziere den Bereich, der sortiert werden muss
            } while (swapped); // Beende, wenn keine Vertauschungen mehr stattfinden
            return { sortedArray: arr, steps: steps };
        }
        let { sortedArray: sortedArrayV1, steps: stepsV1 } = bubbleSortOptimized(numbers);
        printLn("Sorted array V1: " + numbers);
        printLn("Number of steps V1: " + stepsV1);
        printHr();

        printH(4, "Cocktail Shaker Sort");
        function cocktailShakerSort(arr) {
            let n = arr.length;
            let steps = 0;
            let swapped = true;
            let start = 0;
            let end = n - 1;

            while (swapped) {
                swapped = false;

                // Von links nach rechts sortieren
                for (let i = start; i < end; i++) {
                    steps++;
                    console.log(`Step ${steps}: Comparing ${arr[i]} and ${arr[i + 1]}`);
                    if (arr[i] > arr[i + 1]) {
                        [arr[i], arr[i + 1]] = [arr[i + 1], arr[i]]; // Swap
                        swapped = true;
                    }
                }
                end--;

                // Von rechts nach links sortieren
                for (let i = end; i > start; i--) {
                    steps++;
                    console.log(`Step ${steps}: Comparing ${arr[i]} and ${arr[i - 1]}`);
                    if (arr[i] < arr[i - 1]) {
                        [arr[i], arr[i - 1]] = [arr[i - 1], arr[i]]; // Swap
                        swapped = true;
                    }
                }
                start++;
            }
            return { sortedArray: arr, steps: steps };
        }
        let { sortedArray, steps } = cocktailShakerSort(numbers);
        printLn("Sorted array: " + sortedArray);
        printLn("Number of steps: " + steps);
        printHr();

        printH(4, "Bubble Sort mit letzten Tausch");
        function bubbleSortWithLastSwap(arr) {
            let n = arr.length;
            let steps = 0;
            while (n > 0) {
                let lastSwap = 0;
                for (let i = 0; i < n - 1; i++) {
                    steps++;
                    console.log(`Step ${steps}: Comparing ${arr[i]} and ${arr[i + 1]}`);
                    if (arr[i] > arr[i + 1]) {
                        [arr[i], arr[i + 1]] = [arr[i + 1], arr[i]]; // Swap
                        lastSwap = i + 1; // Markiere den Index des letzten Tauschs
                    }
                }
                n = lastSwap; // Reduziere den Bereich auf den letzten Tausch
            }
            return { sortedArray: arr, steps: steps };
        }
        let { sortedArray: sortedArrayV2, steps: stepsV2 } = bubbleSortWithLastSwap(numbers);
        printLn("Sorted array V2: " + numbers);
        printLn("Number of steps V2: " + stepsV2);

        printHr();
        printH(4, "Bubble Sort mit vollständig optimiertem letzten Tausch");

        function bubbleSortFullyOptimized(arr) {
            let n = arr.length;
            let steps = 0;
            while (n > 0) {
                let newN = 0; // Speichert den letzten Tausch
                for (let i = 0; i < n - 1; i++) {
                    steps++;
                    console.log(`Step ${steps}: Comparing ${arr[i]} and ${arr[i + 1]}`);
                    if (arr[i] > arr[i + 1]) {
                        [arr[i], arr[i + 1]] = [arr[i + 1], arr[i]]; // Swap
                        newN = i + 1; // Speichere den Index des letzten Tauschs
                    }
                }
                n = newN; // Reduziere den Bereich auf den letzten Tausch
            }
            return { sortedArray: arr, steps: steps };
        }
        let { sortedArray: sortedArrayV3, steps: stepsV3 } = bubbleSortFullyOptimized(numbers);
        printLn("Sorted array V3: " + numbers);
        printLn("Number of steps V3: " + stepsV3);

        printHr();
        printH(4, "Bubble Sort mit Hybrid-Ansatz");

        function hybridBubbleInsertionSort(arr) {
            let n = arr.length;
            let steps = 0;

            // Bubble Sort für grobe Sortierung
            for (let i = 0; i < n - 1; i++) {
                let swapped = false;
                for (let j = 0; j < n - i - 1; j++) {
                    steps++;
                    console.log(`Step ${steps}: Comparing ${arr[j]} and ${arr[j + 1]}`);
                    if (arr[j] > arr[j + 1]) {
                        [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]]; // Swap
                        swapped = true;
                    }
                }
                if (!swapped) break; // Beende, wenn keine Vertauschungen mehr stattfinden
            }

            // Insertion Sort für Feinsortierung
            for (let i = 1; i < n; i++) {
                let key = arr[i];
                let j = i - 1;
                while (j >= 0 && arr[j] > key) {
                    steps++;
                    arr[j + 1] = arr[j];
                    j--;
                }
                arr[j + 1] = key;
            }

            return { sortedArray: arr, steps: steps };
        }
        let { sortedArray: sortedArrayV4, steps: stepsV4 } = hybridBubbleInsertionSort(numbers);
        printLn("Sorted array V4: " + numbers);
        printLn("Number of steps V4: " + stepsV4);

        printHr();
        printH(4, "Quick Sort");

        function quickSort(arr) {
            let steps = 0;
            steps++;
            if (arr.length <= 1) return arr;
            const pivot = arr[arr.length - 1];
            const left = arr.filter((el) => el < pivot);
            const right = arr.filter((el) => el > pivot);
            return [...quickSort(left), pivot, ...quickSort(right)];
            console.log(`Step: Comparing ${arr} with pivot ${pivot}`);

        }
        let quickSortedArray = quickSort(numbers);
        printLn("Quick Sorted array: " + quickSortedArray);
        printLn("Number of steps: " + steps);

        printHr();

    </script>
</body>

</html>